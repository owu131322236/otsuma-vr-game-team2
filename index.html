<html>
  <head>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v7.0.0/dist/aframe-extras.min.js"></script>
    <link rel="stylesheet" href="stylesheet.css" />
  </head>
  <body>
    <a-scene background="color: #020617">
      <a-plane position="0 0 0"
         rotation="-90 0 0"
         width="100"
         height="100"
         material="shader: flat; color: #4caf50;">
      </a-plane>
      <a-text value="Welcome to Ichimura seminor" position="0 10 20" rotation="0 0 0" color="#fff" width="30" align="center"></a-text>
      <a-entity id="moon"
          geometry="primitive: sphere; radius: 4;"
          material="color: #FFFFA6; emissive: #fff6aa; emissiveIntensity: 0.9; shader: flat;"
          position="-50 35 -20">
      </a-entity>
      <a-entity light="type: directional; color: #ddeeff; intensity: 0.2"
                  position="-50 35 -20"
                  target="#moon">
      </a-entity>
      <!-- ====== 外観 ====== -->
      <a-box position="0 4.5 0" width="33" height="9" depth="33"
      material="color: #cce6ff; opacity: 0.3; roughness: 0.2; metalness: 0.4;">
      </a-box>
      <a-box position="0 9.5 0" width="33.5" height="0.2" depth="33.5" color="#aaaaaa"></a-box>
      <a-box position="0 0 0" width="33.5" height="0.2" depth="33.5" color="#999999"></a-box>
      <a-cylinder position="16 4 16" radius="0.2" height="9" color="#888"></a-cylinder>
      <a-cylinder position="-16 4 16" radius="0.2" height="9" color="#888"></a-cylinder>
      <a-cylinder position="16 4 -16" radius="0.2" height="9" color="#888"></a-cylinder>
      <a-cylinder position="-16 4 -16" radius="0.2" height="9" color="#888"></a-cylinder>
      <a-box position="0 0.2 16.5" width="18" height="0.4" depth="2.5" color="#dddddd"></a-box>
      <a-box position="0 0.0 17.5" width="20" height="0.4" depth="2.5" color="#cccccc"></a-box>
      <a-box position="0 9.9 0" width="33.3" height="0.05" depth="33.3"
         material="emissive: #88ccff; emissiveIntensity: 0.8; shader: flat;">
      </a-box>
      <!-- 地面 -->
      <a-plane position="0 0 0" rotation="-90 0 0" width="100" height="100" color="#5a8f5a"></a-plane>
      <!-- =========内装=========== -->
      <!-- 壁 -->
      <a-box position="0 4 0" width="30" height="8" depth="30" color="#ffffff"></a-box>
      <a-box position="0 4 0" width="29" height="7.5" depth="29" color="#ffffff" opacity="0"></a-box>
      <!-- 玄関ドア -->
        <a-box id="doorB" position="-2.1 2 15" depth="0.2" height="4" width="2" color="#663300" class="clickable" rotation="0 180 0">
            <a-box position="0 0 -0.01" depth="0.01" height="4.2" width="2.2" color="#daa520"></a-box>
            <a-sphere position="-0.7 0 -0.2" radius="0.1" color="#ffd700"></a-sphere>
        </a-box>
        <a-box id="doorB" position="0 2 15" depth="0.2" height="4" width="2" color="#663300" class="clickable" rotation="0 180 0">
            <a-box position="0 0 -0.01" depth="0.01" height="4.2" width="2.2" color="#daa520"></a-box>
            <a-sphere position="0.7 0 -0.2" radius="0.1" color="#ffd700"></a-sphere>
        </a-box>
        <a-text value="Room B" align="center" position="0 4 14.8" rotation="0 180 0" color="#333" width="6"></a-text>
      <!-- ====== ロビー ====== -->
        <!-- 照明 -->
        <a-entity light="type: ambient; intensity: 0.6; color: #ffffff"></a-entity>
        <a-entity light="type: spot; intensity: 1.5; angle: 45; penumbra: 0.3; target: #floor" position="0 8 0"></a-entity>
        <a-entity id="floor"></a-entity>
  
        <!-- 床 -->
        <a-plane position="0 0.1 0" rotation="-90 0 0" width="30" height="30" color="#e0e0e0" material="roughness:0.1; metalness:0.3;"></a-plane>
  
        <!-- 天井 -->
        <a-plane position="0 8 0" rotation="90 0 0" width="30" height="30" color="#fafafa"></a-plane>
  
        <!-- 壁 -->
        <a-plane position="0 4 -15" rotation="0 0 0" width="30" height="8" color="#ffffff"></a-plane>
        <a-plane position="0 4 15" rotation="0 180 0" width="30" height="8" color="#ffffff"></a-plane>
        <a-plane position="15 4 0" rotation="0 -90 0" width="30" height="8" color="#ffffff"></a-plane>
        <a-plane position="-15 4 0" rotation="0 90 0" width="30" height="8" color="#ffffff"></a-plane>
  
        <!-- 柱 -->
        <a-cylinder position="-10 4 -10" radius="0.5" height="8" color="#dcdcdc"></a-cylinder>
        <a-cylinder position="10 4 -10" radius="0.5" height="8" color="#dcdcdc"></a-cylinder>
        <a-cylinder position="-10 4 10" radius="0.5" height="8" color="#dcdcdc"></a-cylinder>
        <a-cylinder position="10 4 10" radius="0.5" height="8" color="#dcdcdc"></a-cylinder>
  
        <!-- カーペット -->
        <a-plane position="0 0.12 0" rotation="-90 0 0" width="4" height="25" color="#b22222"></a-plane>
        <!-- ドア（前） -->
        <a-box id="doorA" position="0 2 -14.9" depth="0.2" height="4" width="2" color="#663300" class="clickable">
            <a-box position="0 0 0.01" depth="0.01" height="4.2" width="2.2" color="#daa520"></a-box>
            <a-sphere position="0.7 0 0.2" radius="0.1" color="#ffd700"></a-sphere>
        </a-box>
        <a-text value="Room A" align="center" position="0 4 -14.8" color="#333" width="6"></a-text>
        
        <!-- ドア（左） -->
        <a-box id="doorC" position="-14.9 2 0" depth="2" height="4" width="0.2" color="#663300" class="clickable" rotation="0 0 0">
            <a-box position="0 0 0.01" depth="0.01" height="4.2" width="2.2" rotation="0 -90 0" color="#daa520"></a-box>
            <a-sphere position="0.2 0 0.7" radius="0.1" color="#ffd700"></a-sphere>
        </a-box>
        <a-text value="Room C" align="center" position="-14.8 4 0" rotation="0 90 0" color="#333" width="6"></a-text>
    
        <!-- ドア（右） -->
        <a-box id="doorD" position="14.9 2 0" depth="2" height="4" width="0.2" color="#663300" class="clickable" rotation="0 0 0">
            <a-box position="0 0 0.01" depth="0.01" height="4.2" width="2.2" rotation="0 90 0" color="#daa520"></a-box>
            <a-sphere position="0.2 0 -0.7" radius="0.1" color="#ffd700"></a-sphere>
        </a-box>
        <a-text value="Room D" align="center" position="14.8 4 0" rotation="0 -90 0" color="#333" width="6"></a-text>
      
        <!-- シャンデリア -->
        <a-sphere position="0 7 0" radius="0.5" color="#ffd700" material="emissive: #ffd700; emissiveIntensity: 0.6;"></a-sphere>

        <!-- カメラなど -->
        <a-entity id="cameraRig" position="0 1.6 30">
            <a-entity camera look-controls wasd-controls>
            <a-entity cursor="rayOrigin: mouse" raycaster="objects: .clickable"></a-entity>
            </a-entity>
        </a-entity>
        <a-entity id="rightHand"
          laser-controls="hand: right"
          raycaster="objects: .clickable"   
          line="opacity: 0.9">       
        </a-entity>
        <a-entity id="leftHand"
                laser-controls="hand: left"
                raycaster="objects: .clickable"
                line="opacity: 0.9">
        </a-entity>

    </a-scene>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
          const scene = document.querySelector("a-scene");
          const doorA = document.querySelector("#doorA");
          doorA.addEventListener("click", () => {
            window.location.href = "index2.html"; 
          });
          //---------------木---------------------
          const TREE_COUNT = 25;
        for (let i = 0; i < TREE_COUNT; i++) {
          let x, z;
          // 範囲
          do {
            x = (Math.random() - 0.5) * 80;
            z = (Math.random() - 0.5) * 80;
          } while (Math.abs(x) < 20 && Math.abs(z) < 20);

          const scale = 0.8 + Math.random() * 1.3;

          // 幹
          const trunkHeight = 3.5 * scale;
          const trunk = document.createElement("a-cylinder");
          trunk.setAttribute("height", trunkHeight);
          trunk.setAttribute("radius", 0.25 * scale);
          trunk.setAttribute("color", "#8b5a2b");
          trunk.setAttribute("material", "shader: flat;");
          trunk.setAttribute("position", `${x} ${trunkHeight / 2} ${z}`);

          // 葉
          const crownBaseY = trunkHeight;
          const leafColors = ["#6bc46b", "#74d474", "#5fcf5f"];

          for (let j = 0; j < 3; j++) {
            const leaf = document.createElement("a-sphere");
            const offsetX = (Math.random() - 0.5) * 1.0 * scale;
            const offsetZ = (Math.random() - 0.5) * 1.0 * scale;
            const offsetY = 0.8 + Math.random() * 0.6; 
            leaf.setAttribute("position", `${x + offsetX} ${crownBaseY + offsetY} ${z + offsetZ}`);
            leaf.setAttribute("radius", 1.2 * scale);
            leaf.setAttribute("color", leafColors[j]);
            leaf.setAttribute("material", "shader: flat;");
            scene.appendChild(leaf);
          }

          scene.appendChild(trunk);
        }
         //-------光のホワホワ-----------------------
          const PARTICLE_COUNT = 40;

          for (let i = 0; i < PARTICLE_COUNT; i++) {
            let x, z;
            do {
              x = (Math.random() - 0.5) * 80;
              z = (Math.random() - 0.5) * 80;
            } while (Math.abs(x) < 20 && Math.abs(z) < 20);
            const y = Math.random() * 5 + 1;
            const particle = document.createElement("a-sphere");
            particle.setAttribute("position", `${x} ${y} ${z}`);
            particle.setAttribute("radius", "0.05");
            particle.setAttribute("color", "#ffeeaa");
            particle.setAttribute("material", "emissive: #ffeeaa; emissiveIntensity: 0.8; shader: flat;");
            particle.setAttribute("animation", `
              property: position;
              dir: alternate;
              dur: ${3000 + Math.random()*2000};
              easing: easeInOutSine;
              loop: true;
              to: ${x} ${y + 1.5} ${z};
            `);
            scene.appendChild(particle);
          }
        });
      </script>
  </body>
</html>

